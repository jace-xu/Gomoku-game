# 🎯 Gomoku_game 五子棋游戏

## ⭐ 如果你喜欢这个项目，请给我们一个星星！ ⭐
如果这个五子棋游戏对你有帮助，或者你觉得它很有趣，请不要忘记给我们点个 ⭐ Star ⭐！  
你的支持是我们持续改进和开发的最大动力！ 🚀✨  
**点击右上角的 ⭐ 按钮支持我们吧！** 🙏💫

## 📖 项目简介

本项目为小组成员基于 Python 语言开发的**五子棋智能对弈系统**，旨在实现人机对战、双人对战、自动复盘评语、历史记录与多样化界面体验等功能。系统采用模块化设计，结合人工智能与现代人机交互界面，既适合五子棋爱好者休闲娱乐，也便于教学与算法研究。  
本项目仍在持续完善中，欢迎批评指正！ ✨

---

## 📁 目录结构

```
├── main.py                   # 项目入口，集成调度 UI 和逻辑模块，主循环
├── ui/
│   ├── board_ui.py           # 棋盘UI，负责网格、棋子、音效、背景等显示与交互
│   ├── menu_ui.py            # 菜单界面（主菜单、结果菜单），支持结算和评语显示
│   ├── animation_ui.py       # 逐帧动画界面，胜负动画播放
│   ├── model_selection_ui.py # 游戏模式选择（AI/双人）
│   ├── setting_ui.py         # 设置界面，支持音量、难度、皮肤、BGM
│   └── past_ui.py            # 历史对局复盘与浏览界面
├── logic/
│   ├── board_state.py        # 棋盘数据结构及规则（悔棋、判胜、保存历史）
│   ├── move_logic.py         # AI 决策主引擎，支持多难度切换
│   └── comment.py            # AI对局评语（LLM 支持，自动生成）
├── game_database/            # 历史数据与设置（json格式）
│   ├── history.json          # 历史对局记录
│   ├── settings.json         # 用户设置持久化
│   └── results.json          # 最近一局结算结果
├── assets/                   # 图片、音效、背景音乐等资源
│   ├── piece_sound.mp3       # 落子音效
│   ├── loadbackground.jpg    # 菜单背景
│   ├── animation-v/              # 胜利动画序列帧
│   ├── animation-d/              # 失败动画序列帧
│   ├── BGM/                  # 背景音乐（mp3）
│   └── backgrounds/          # 棋盘皮肤（png, jpg等）
├── requirements.txt          # 依赖库清单
└── README.md                 # 项目说明（本文件）
```

---

## ⭐ 主要功能

- **🎮 对局模式**  
  - 玩家 vs AI：AI支持多难度，自动先后手切换
  - 双人本地对战：支持两人轮流执棋
  - 模式切换界面友好

- **🧠 智能AI引擎**  
  - 三档难度（Easy/Normal/Hard），权重和策略切换
  - 具备威胁检测、主动防守、组合进攻能力
  - 可实时调整难度，适合不同水平玩家

- **🎬 动画与音效**  
  - 胜负/和棋动画（逐帧播放，界面沉浸）
  - 落子音效、可切换的背景音乐（BGM）

- **📊 对局复盘与历史记录**  
  - 自动保存每盘棋局（棋谱、评语、模式、时间戳等）
  - 历史列表支持滚动、点击查看详情、棋盘快照和完整评语
  - 复盘界面支持棋盘渲染和详细信息展示

- **💬 AI自动评语**  
  - 集成 LLM（大语言模型）自动分析每盘对局
  - 评语异步生成，支持打字机动画，复盘可查看
  - 没有网络时自动回退为本地模板评语

- **⚙️ 多种自定义设置**  
  - 棋盘皮肤、背景音乐（BGM）、音效音量、AI难度等
  - 设置界面支持动态切换、实时预览和持久化保存

---

## 🛠️ 环境与依赖

- **🐍 Python 3.8+**
- **🎮 Pygame 2.5+**（界面、音效、动画）
- **🤖 openai**（用于 AI 评语，支持 Deepseek API 等兼容接口）
- 其他依赖详见 [`requirements.txt`](./requirements.txt)

安装依赖：
```bash
pip install -r requirements.txt
```

---

## 🚀 启动方式

1. **📥 克隆文件并进入目录**
    ```bash
    copy Gomoku-game file
    ```

2. **⬇️ 安装依赖**
    ```bash
    pip install -r requirements.txt
    ```

3. **▶️ 运行游戏**
    ```bash
    python main.py
    ```

---

## 🔧 配置与资源说明

- **💾 历史与配置数据**  
  - 所有对局历史、用户设置、最近结果存储于 `game_database/` 下，格式为 JSON
  - 若目录不存在，程序会自动创建
    
- **🎨 皮肤与BGM资源**  
  - 棋盘皮肤图像放在 `assets/backgrounds/`，支持 png/jpg
  - 背景音乐放在 `assets/BGM/`，支持 mp3
  - 落子音效为放在assets下的单一mp3文件，为 `assets/piece_sound.mp3`
  - 菜单背景为放在assets下的单一图片文件，为 `assets/loadbackground.jpg`
  - 如想要自定义，可自行在对应文件位置上传动画帧/背景/音效资源，菜单背景与落子目前暂只支持单一选择，BGM部分支持选择两个曲目，棋盘背景支持多图片文件选择。

- **🔗 AI评语与API配置**  
  - 默认评语生成模块使用 Deepseek Chat API（或兼容 OpenAI API），如需自定义请在 `logic/comment.py` 中修改相关配置（如 API KEY 和 base_url）
  - 若无互联网/接口不可用，系统自动采用本地模板评语

---

## 🎯 典型操作流程

1. ▶️ 运行 `main.py`，进入主菜单
2. 🎮 选择"Start Game"，进入模式选择（AI对战或双人对战）
3. 🖱️ 通过鼠标点击棋盘下棋，悔棋/设置等按钮位于界面侧边
4. 🏆 游戏结束后，自动弹出动画和评语结算界面
5. 📊 结算后，历史记录已自动保存，可在主菜单选择"History"复盘
6. ⚙️ 在"Settings"中可切换皮肤、音量、难度、BGM等个性化配置

---

## ⚠️ 已知问题与注意事项

- **⏳ AI评语生成需耐心等待**  
  对局结束后，AI评语生成较慢时请耐心等待（有进度提示/打字机动画），**建议评语完全显示后再点击退出**，否则本局历史记录的评语可能保存为"评语生成中..."或丢失。

- **🎵 音频上传限制**
  - `setting_ui.py`只支持读取`assets/BGM/`中的前两首曲目。

- **💻 平台兼容性**
  - 项目已在 Windows 环境测试，Mac 下如遇字体或音频问题请尝试更换字体文件或格式

- **🎨 ui设计**
  - 本项目中图片与音效素材均来自网络，为免费不可商用素材或ai生成素材。
    
- **🐛 开发中BUG**
  - 由于项目持续开发，部分新功能边缘场景可能还有 bug，欢迎 issue 反馈
  - **❗ 退出/切换界面时请避免强制关闭窗口，务必使用界面上绘制的按钮，以防止数据丢失**
  - 资源（如 assets、game_database 目录下的图片、音效、BGM、字体等）需确保路径和文件名与代码一致。不同操作系统或工作目录下，若资源位置被更改，某些界面将无法正常显示或报错。
  - 字体 msyh.ttf 缺失时，部分中文界面会回退为默认字体，导致乱码或排版错乱。
  - `settings.json`、`history.json`、`results.json` 采用 JSON 存储，若多人协作或异常退出时并发写入，可能导致文件损坏、数据丢失，进而无法启动或加载历史对局。

---

## 🏗️ 主要模块说明

### 1. `main.py` 🎯
- 程序入口，集成所有 UI 与逻辑模块，主循环管理，包括菜单、游戏、设置、历史等切换。
- 管理全局状态、游戏模式、配置加载与保存。

### 2. `logic/` 🧠
- **board_state.py**：棋盘状态与规则判定，悔棋、落子、胜负判定、历史保存等。
- **move_logic.py**：AI 核心，支持多难度与策略调整。
- **comment.py**：对局评语生成，支持 LLM 自动调用和本地回退。

### 3. `ui/` 🎨
- **board_ui.py**：棋盘绘制、棋子显示、落子音效、皮肤/背景/音量/按钮等界面交互。
- **menu_ui.py**：主菜单、模式选择、结算界面，集成评语显示和动画。
- **animation_ui.py**：胜利/失败/和棋动画播放，支持逐帧加载和自适应尺寸。
- **setting_ui.py**：设置界面，支持难度、音量、皮肤、BGM 选择和实时应用。
- **past_ui.py**：历史列表与单局复盘界面，包括棋盘快照、评语、详情浏览。
- **mode_selection_ui.py**：简洁的模式选择界面（AI/双人）。

---

## 🔬 学术与技术亮点

- **🧠 AI决策算法**：支持多难度切换，结合威胁检测、主动防守、策略博弈，适合教学演示与AI算法研究。
- **💻 人机交互设计**：UI风格简洁、可自定义，动画与音效提升沉浸感，菜单、设置、提示等均符合用户习惯。
- **📈 自动化复盘与分析**：每盘棋自动生成AI评语，便于对弈复盘、策略分析与教学反思。
- **🔧 模块化架构**：逻辑与界面分离，便于二次开发、移植和扩展。

---

## 🤝 贡献与反馈

- 💡 鼓励提出建议、报告 Bug 或提交 PR
- 🐛 如遇问题请附详细环境、操作步骤和错误信息
- 📬 可联系项目作者或在 GitHub Issue 区留言

---

## 🙏 致谢

感谢老师的悉心指导与小组成员的积极合作！ 👨‍🏫👥 
### 组长：徐至谦
### 组员：张欣玥，李扬天，伍思哲，王彦博，任宇晨
本项目在开发过程中收获颇丰，欢迎大家进一步批评、建议与交流。 💭  
如有任何问题或改进建议，敬请随时联系！ 📞  
email:2661567025@qq.com 📧

---
